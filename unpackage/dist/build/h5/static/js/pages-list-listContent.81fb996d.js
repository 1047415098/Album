(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-list-listContent"],{"0405":function(t,e,i){"use strict";i.r(e);var n=i("9bac"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=a.a},"1b96":function(t,e,i){var n=i("7664");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("0917ac2c",n,!0,{sourceMap:!1,shadowMode:!1})},7664:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".albumList[data-v-0dfe2be2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:.5rem}.content[data-v-0dfe2be2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.albumListLi[data-v-0dfe2be2]{width:48%;background-color:#fff;box-shadow:1px 2px 3px #f2f6f8;height:14rem;margin-bottom:.5rem}.albumListLi img[data-v-0dfe2be2]{width:100%;height:65%}.albumListLi[data-v-0dfe2be2]:nth-child(2n-1){margin-right:2%}.alibumTitle[data-v-0dfe2be2]{color:#444;height:20%;width:100%;overflow:hidden;text-overflow:ellipsis}.alibumInfo[data-v-0dfe2be2]{color:#c1c1c1;font-size:.8rem;line-height:1.5rem}.lable[data-v-0dfe2be2]{box-shadow:1px 2px 3px #d9ddde;margin-bottom:5vw}.lableTitle[data-v-0dfe2be2]{width:100%;height:12vw;background-color:#fff;line-height:12vw;display:-webkit-box;display:-webkit-flex;display:flex}.lableTitle p[data-v-0dfe2be2]{color:#444;text-indent:2vw}.lableTitleLi[data-v-0dfe2be2]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.albumInfo[data-v-0dfe2be2]{width:100%;height:30vw}.albumInfo uni-textarea[data-v-0dfe2be2]{width:100%;height:100%}.lableTitle .lableTitleLi[data-v-0dfe2be2]:last-child{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.lableTitleLi img[data-v-0dfe2be2]{width:7vw;height:7vw;padding:0 3vw;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.labelContent[data-v-0dfe2be2]{width:100%;-webkit-transition:all .5s;transition:all .5s;background-color:#fff;overflow:hidden}.labelContentList[data-v-0dfe2be2]{display:-webkit-box;display:-webkit-flex;display:flex}.labelContentLi[data-v-0dfe2be2]{height:10vw;line-height:10vw}.labelContentLi uni-input[data-v-0dfe2be2]{height:10vw;line-height:10vw}",""])},"82b2":function(t,e,i){"use strict";i.r(e);var n=i("93b9"),a=i("0405");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("e71f");var l,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"0dfe2be2",null,!1,n["a"],l);e["default"]=c.exports},"93b9":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{name:"listContent"}},[i("v-uni-view",{staticClass:"Limit"},[t.isLogin?i("v-uni-view",{staticClass:"lable"},[i("v-uni-view",{staticClass:"lableTitle"},[i("v-uni-view",{staticClass:"lableTitleLi"},[i("p",[t._v("管理相册")])]),i("v-uni-view",{staticClass:"lableTitleLi",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showLabelContent.apply(void 0,arguments)}}},[i("img",{attrs:{src:"/static/icon/add.png",alt:""}})])],1),i("v-uni-view",{staticClass:"labelContent",style:t.isLabelOpen?"height:55vw;":"height: 0vw;"},[i("v-uni-view",{staticClass:"Limit"},[i("v-uni-view",{staticClass:"labelContentList"},[i("v-uni-view",{staticClass:"albumInfo"},[i("v-uni-textarea",{attrs:{placeholder:"输入你的相册描述"},model:{value:t.albumInfo,callback:function(e){t.albumInfo=e},expression:"albumInfo"}})],1)],1),i("v-uni-view",{staticClass:"labelContentList"},[i("v-uni-view",{staticClass:"labelContentLi",staticStyle:{width:"70%"}},[i("v-uni-input",{attrs:{type:"text",placeholder:"输入相册名"},model:{value:t.className,callback:function(e){t.className=e},expression:"className"}})],1),i("v-uni-view",{staticClass:"labelContentLi",staticStyle:{width:"30%",display:"flex","justify-content":"flex-end","align-items":"center"}},[i("v-uni-button",{staticStyle:{"font-size":"3vw",width:"13vw",height:"8vw","margin-right":"0px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addClass.apply(void 0,arguments)}}},[t._v("添加")])],1)],1),i("v-uni-view",{staticClass:"labelContentList"},[i("v-uni-view",{staticClass:"labelContentLi",staticStyle:{width:"40%"}},[i("v-uni-input",{attrs:{type:"text",placeholder:"长按选择相册"},model:{value:t.changeName,callback:function(e){t.changeName=e},expression:"changeName"}})],1),i("v-uni-view",{staticClass:"labelContentLi",staticStyle:{width:"60%",display:"flex","justify-content":"flex-end","align-items":"center"}},[i("v-uni-button",{staticStyle:{"font-size":"3vw",width:"13vw",height:"8vw","margin-right":"0px"},attrs:{type:"primary","data-id":1,disabled:!t.changeIndex&&t.changeName.length<1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLeftRight.apply(void 0,arguments)}}},[t._v("前移")]),i("v-uni-button",{staticStyle:{"font-size":"3vw",width:"13vw",height:"8vw","margin-right":"0px"},attrs:{type:"primary","data-id":2,disabled:!t.changeIndex&&t.changeName.length<1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLeftRight.apply(void 0,arguments)}}},[t._v("后移")]),i("v-uni-button",{staticStyle:{"font-size":"3vw",width:"13vw",height:"8vw","margin-right":"0px"},attrs:{type:"primary",disabled:!t.changeIndex&&t.changeName.length<1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeSave.apply(void 0,arguments)}}},[t._v("保存")]),i("v-uni-button",{staticStyle:{"font-size":"3vw",width:"13vw",height:"8vw","margin-right":"0px"},attrs:{type:"primary",disabled:!t.changeIndex&&t.changeName.length<1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCut.apply(void 0,arguments)}}},[t._v("删除")])],1)],1)],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"albumList"},t._l(t.alibumList,function(e,n){return i("v-uni-view",{key:n,staticClass:"albumListLi",style:t.changeIndex==n&&""!=t.changeIndex?"box-shadow: 1px 2px 3px #ccd0d1;":"",attrs:{"data-index":n},on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.showOther.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPic.apply(void 0,arguments)}}},[i("img",{attrs:{src:e.img,alt:"",mode:"aspectFit"}}),i("v-uni-view",{staticClass:"Limit"},[i("v-uni-view",{staticClass:"alibumTitle"},[i("p",[t._v(t._s(e.title))])]),i("p",{staticClass:"alibumInfo"},[t._v(t._s(e.num)+"张图片")])],1)],1)}),1)],1)],1)},s=[];i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return n})},"9bac":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("55dd");var n=i("d7be"),a={name:"listContent",data:function(){return{alibumList:[],isLabelOpen:!1,isLogin:!1,className:"",changeName:"",changeIndex:"",albumInfo:"",classId:""}},onLoad:function(t){this.getAlbum(t.id),this.classId=t.id},onShow:function(){1==uni.getStorageSync("isF5List")&&(this.alibumList=[],this.getAlbum(this.classId),uni.setStorageSync("isF5List",!1))},methods:{changeCut:function(t){var e=this;""==this.albumInfo&&""==this.changeName||(""==this.changeIndex&&(this.changeIndex=0),uni.showLoading({title:"删除中",mask:!0}),n.sget({url:"album/cutType",data:{id:e.alibumList[e.changeIndex].Id}}).then(function(t){1024==t.data.code?(uni.showToast({title:"删除成功"}),e.alibumList.splice(e.changeIndex,1),e.changeIndex="",e.changeName="",e.albumInfo=""):uni.showToast({title:t.data.msg,icon:"none"}),uni.hideLoading()}).catch(function(t){console.log(t)}))},changeSave:function(t){var e=this;""!=this.changeName?(uni.showLoading({title:"保存中",mask:!0}),n.sget({url:"album/saveType",data:{changeName:e.changeName,changeInfo:e.albumInfo,id:e.alibumList[e.changeIndex].Id}}).then(function(t){1024==t.data.code?(uni.showToast({title:"保存成功"}),e.alibumList[e.changeIndex].title=e.changeName,e.alibumList[e.changeIndex].info=e.changeInfo):uni.showToast({title:t.data.msg,icon:"none"}),uni.hideLoading()}).catch(function(t){console.log(t)})):uni.showToast({title:"不能为空",icon:"none"})},changeLeftRight:function(t){var e=this,i=t.currentTarget.dataset.id,a=this.changeName,s=this;if(""!=a||void 0!=a){if(1==i)var l=this.alibumList[this.changeIndex-1];else l=this.alibumList[this.changeIndex+1];var o=l&&l["sort"];if(void 0==l)return 0;n.sget({url:"album/changeTypeSort",data:{AID:s.alibumList[s.changeIndex].Id,ASORT:o,BID:l.Id,BSORT:s.alibumList[s.changeIndex]["sort"]}}).then(function(t){if(1024==t.data.code){uni.showToast({title:"更换成功"});var n=s.alibumList[s.changeIndex]["sort"],a=s.alibumList,c=s.alibumList[s.changeIndex];c["sort"]=o;l["sort"]=n,1==i?(a[s.changeIndex]=l,a[e.changeIndex-1]=c,e.changeIndex=e.changeIndex-1):(a[s.changeIndex]=l,a[e.changeIndex+1]=c,e.changeIndex=e.changeIndex+1),s.alibumList=a}else uni.showToast({title:t.data.msg,icon:"none"});uni.hideLoading()}).catch(function(t){console.log(t)})}else uni.showToast({title:"你还没有选择类别",icon:"none"})},showOther:function(t){var e=t.currentTarget.dataset.index,i=(this.alibumList[e].Id,this.alibumList[e].title),n=this.alibumList[e].info;console.log(e),this.changeName=i,this.changeIndex=e,this.albumInfo=n,uni.showToast({title:"选择成功，顶部开始管理",icon:"none"})},showLabelContent:function(){this.isLabelOpen=!this.isLabelOpen},addClass:function(){var t=this;""!=this.className?(uni.showLoading({title:"添加中",mask:!0}),n.http({url:"album/addAlbum",data:{className:t.className,classInfo:t.albumInfo,classId:t.classId}}).then(function(e){1024==e.data.code?(uni.showToast({title:"添加成功"}),t.alibumList.push({Id:e.data.Id,title:t.className,class_id:t.classId,img:"http://qzonestyle.gtimg.cn/aoi/img/photo/logic/pic-none.png?rf=albumlist&t=5",info:t.albumInfo,num:0,sort:e.data.Id-1}),t.className="",t.albumInfo=""):uni.showToast({title:e.data.msg,icon:"none"}),uni.hideLoading()}).catch(function(t){console.log(t)})):uni.showToast({title:"不能为空",icon:"none"})},showPic:function(t){var e=t.currentTarget.dataset.index;uni.navigateTo({url:"../pic/pic?id="+this.alibumList[e].Id})},getAlbum:function(t){var e=this;n.get({url:"album/getAlbumClassPic",data:{id:t}}).then(function(t){e.alibumList=e.alibumList.concat(t.data)}).catch(function(t){console.log(t)})}},mounted:function(){""!=uni.getStorageSync("session")&&void 0!=uni.getStorageSync("session")&&uni.getStorageSync("session").length>10?this.isLogin=!0:this.isLogin=!1}};e.default=a},d7be:function(t,e,i){"use strict";var n=i("288e"),a=n(i("795b")),s=getApp().globalData.url;t.exports={get:function(t){return new a.default(function(e,i){wx.request({url:s+t.url,data:t.data,method:"GET",success:function(t){e(t)},fail:function(t){i(t)}})})},post:function(t){return new a.default(function(e,i){wx.request({url:s+t.url,data:t.data,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(t){e(t)},fail:function(t){i(t)}})})},sget:function(t){return new a.default(function(e,i){""!=uni.getStorageSync("session")&&void 0!=uni.getStorageSync("session")||(uni.showToast({title:"未登录",icon:"none"}),setTimeout(function(){uni.navigateTo({url:"/pages/my/login.vue"})},2e3)),t.data.session=uni.getStorageSync("session"),wx.request({url:s+t.url,data:t.data,method:"GET",success:function(t){e(t)},fail:function(t){i(t)}})})},http:function(t){return new a.default(function(e,i){""!=uni.getStorageSync("session")&&void 0!=uni.getStorageSync("session")||(uni.showToast({title:"未登录",icon:"none"}),setTimeout(function(){uni.navigateTo({url:"/pages/my/login.vue"})},2e3)),t.data.session=uni.getStorageSync("session"),wx.request({url:s+t.url,data:t.data,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(t){e(t)},fail:function(t){i(t)}})})}}},e71f:function(t,e,i){"use strict";var n=i("1b96"),a=i.n(n);a.a}}]);